<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" href="extensions.css"/>
    <link rel="stylesheet" href="jenkins.css"/>
    <style type="text/css">
        .circle-edit {
            stroke: #3a70b0 !important;
        }
    </style>
</head>
<body>

<div id="app"></div>

<!-- script src="//unpkg.com/react@16.5.2/umd/react.production.min.js"></script>
<script src="//unpkg.com/react-dom@16.5.2/umd/react-dom.production.min.js"></script -->
<script src="//unpkg.com/react@16.5.2/umd/react.development.js"></script>
<script src="//unpkg.com/react-dom@16.5.2/umd/react-dom.development.js"></script>
<script src="editor.js"></script>
<script>
    var data = [
        {
            id: "stag1",
            name: "stag1",
            actions: [
                {
                    id: "action1",
                    name: "action1",
                    state: "",
                    error: false
                },
                {
                    id: "action2",
                    name: "action2",
                    state: "selected",
                    error: false
                },
                {
                    id: "action3",
                    name: "action3",
                    state: "",
                    error: false,
                },
                {
                    id: "action4",
                    name: "action4",
                    state: "",
                    error: false
                }
            ]
        },

        {
            id: "stag2",
            name: "stag2",
            actions: [
                {
                    id: "action1",
                    name: "action1",
                    state: "",
                    error: true,
                },
                {
                    id: "action2",
                    name: "action2",
                    state: "",
                    error: false
                }
            ]
        },

        {
            id: "stag3",
            name: "stag3",
            actions: [
                {
                    id: "action1",
                    name: "action1",
                    state: "",
                    error: false
                }
            ]
        },
    ];
    var callBackFunc = function (tstag_index, taction_index) {
        console.log("callback: ", tstag_index, taction_index);
        if (tstag_index === -1) {
            data.push(
                    {
                        id: "stag_New",
                        name: "stag_New",
                        actions: [
                            {
                                id: "action_New",
                                name: "actionNew",
                                state: "",
                                error: false
                            }
                        ]
                    },)
        } else if (taction_index === -1) {
            data[tstag_index].actions.push(
                    {
                        id: "action_New",
                        name: "actionNew",
                        state: "",
                        error: false
                    }
            )
        } else {
            data.map(function (stag, stag_index) {
                stag.actions.map(function (action, action_index) {
                    if (stag_index === tstag_index && action_index === taction_index) {
                        action.state = "selected";
                    } else {
                        action.state = "";
                    }
                })
            });
        }
        ReactDOM.render(
                RenderPipeline(data, 1.0, callBackFunc),
                document.getElementById('app')
        );
    };
    ReactDOM.render(
            RenderPipeline(data, 1.0, callBackFunc),
            document.getElementById('app')
    );
</script>
</body>
</html>

